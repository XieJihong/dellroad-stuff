<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Sun Jan 26 16:32:19 CST 2014 -->
<title>ThreadConfigurable (Java Class Library API)</title>
<meta name="date" content="2014-01-26">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ThreadConfigurable (Java Class Library API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ThreadConfigurable.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/dellroad/stuff/spring/RetryTransactionProvider.html" title="interface in org.dellroad.stuff.spring"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/dellroad/stuff/spring/ThreadConfigurableObject.html" title="interface in org.dellroad.stuff.spring"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/dellroad/stuff/spring/ThreadConfigurable.html" target="_top">Frames</a></li>
<li><a href="ThreadConfigurable.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation_type_optional_element_summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#annotation_type_element_detail">Element</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.dellroad.stuff.spring</div>
<h2 title="Annotation Type ThreadConfigurable" class="title">Annotation Type ThreadConfigurable</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/Retention.html?is-external=true" title="class or interface in java.lang.annotation">@Retention</a>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/Retention.html?is-external=true#value()" title="class or interface in java.lang.annotation">value</a>=<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/RetentionPolicy.html?is-external=true#RUNTIME" title="class or interface in java.lang.annotation">RUNTIME</a>)
<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/Target.html?is-external=true" title="class or interface in java.lang.annotation">@Target</a>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/Target.html?is-external=true#value()" title="class or interface in java.lang.annotation">value</a>=<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/ElementType.html?is-external=true#TYPE" title="class or interface in java.lang.annotation">TYPE</a>)
<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/Documented.html?is-external=true" title="class or interface in java.lang.annotation">@Documented</a>
<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/Inherited.html?is-external=true" title="class or interface in java.lang.annotation">@Inherited</a>
public @interface <a href="../../../../src-html/org/dellroad/stuff/spring/ThreadConfigurable.html#line.97">ThreadConfigurable</a></pre>
<div class="block">Indicates that the class is a candidate for configuration using the <code>ThreadConfigurableAspect</code> aspect.

 <p>
 Works just like Spring's <a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/annotation/Configurable.html?is-external=true" title="class or interface in org.springframework.beans.factory.annotation"><code>@Configurable</code></a> annotation,
 but whereas <a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/annotation/Configurable.html?is-external=true" title="class or interface in org.springframework.beans.factory.annotation"><code>@Configurable</code></a> autowires using a fixed
 application context stored in a static variable, <a href="../../../../org/dellroad/stuff/spring/ThreadConfigurable.html" title="annotation in org.dellroad.stuff.spring"><code>@ThreadConfigurable</code></a> autowires using an
 application context that is configurable on a per-thread basis (or more generally, any way you want). This allows the
 same <a href="../../../../org/dellroad/stuff/spring/ThreadConfigurable.html" title="annotation in org.dellroad.stuff.spring"><code>@ThreadConfigurable</code></a>-annotated beans to be instantiated and autowired by different
 application contexts at the same time, where the application context chosen depends on the thread in which
 the instantiation is occurring. This is useful when creating multiple "parallel universe" application contexts
 within the same application.
 </p>

 <p>
 The configuring application context is determined by the singleton <a href="../../../../org/dellroad/stuff/spring/ThreadLocalContext.html" title="class in org.dellroad.stuff.spring"><code>ThreadLocalContext</code></a> instance,
 i.e., it's the value returned by invoking <a href="../../../../org/dellroad/stuff/spring/ThreadLocalContext.html#getInstance()"><code>ThreadLocalContext.getInstance()</code></a> to get the singleton
 <a href="../../../../org/dellroad/stuff/spring/ThreadLocalContext.html" title="class in org.dellroad.stuff.spring"><code>ThreadLocalContext</code></a> instance, and then <a href="../../../../org/dellroad/stuff/spring/ThreadLocalContext.html#get()"><code>ThreadLocalContext.get()</code></a> to get the application context associated with the current thread.
 </p>

 <p>
 With <a href="../../../../org/dellroad/stuff/spring/ThreadLocalContext.html" title="class in org.dellroad.stuff.spring"><code>ThreadLocalContext</code></a> the configured application context is inherited by spawned child threads,
 so typically this configuration need only be done once when starting new some process or operation,
 even if that operation creates multiple threads.
 </p>

 <p>
 For example:
  <blockquote><pre>
  new Thread("context startup") {
      &#64;Override
      public void run() {

          // Setup the context used by &#64;ThreadConfigurable beans created in this thread;
          // to be safe, configure the ThreadLocalContext before refreshing the context.
          ConfigurableApplicationContext context = new ClassPathXmlApplicationContext(
            new String[] { "applicationContext.xml" }, false);
          ThreadLocalContext.getInstance().set(context);
          context.refresh();

          // Now &#64;ThreadConfigurable beans will use "context" for autowiring, but only
          // if they are created in this thread (or one of its child threads).
          new SomeThreadConfigurableBean() ...
      }
  }.start();
  </pre></blockquote>

 <p>
 Note: to make this annotation behave like Spring's
 <a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/annotation/Configurable.html?is-external=true" title="class or interface in org.springframework.beans.factory.annotation"><code>@Configurable</code></a> annotation, include the
 <a href="../../../../org/dellroad/stuff/spring/ThreadLocalContext.html" title="class in org.dellroad.stuff.spring"><code>ThreadLocalContext</code></a> singleton instance in your bean factory:
 <blockquote><pre>
     &lt;bean class="org.dellroad.stuff.spring.ThreadLocalContext" factory-method="getInstance"/&gt;
 </pre></blockquote>
 This will set the containing application context as the default for the singleton. This definition should be
 listed prior to any other bean definitions that could result in <a href="../../../../org/dellroad/stuff/spring/ThreadConfigurable.html" title="annotation in org.dellroad.stuff.spring"><code>@ThreadConfigurable</code></a>-annotated
 beans being created during bean factory startup.
 </p>

 <p>
 Note: if a <a href="../../../../org/dellroad/stuff/spring/ThreadConfigurable.html" title="annotation in org.dellroad.stuff.spring"><code>@ThreadConfigurable</code></a>-annotated bean is constructed and no application context
 has been configured for the current thread, and there is no default set, then no configuration is performed
 and a debug message is logged (to logger <code>org.dellroad.stuff.spring.ThreadConfigurableAspect</code>); this consistent
 with the behavior of Spring's <a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/annotation/Configurable.html?is-external=true" title="class or interface in org.springframework.beans.factory.annotation"><code>@Configurable</code></a>.
 </p>

 <p>
 Running the AspectJ compiler on your annotated classes is required to activate this annotation.
 </p></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/dellroad/stuff/spring/ThreadLocalContext.html" title="class in org.dellroad.stuff.spring"><code>ThreadLocalContext</code></a>, 
<a href="../../../../org/dellroad/stuff/spring/ThreadTransactional.html" title="annotation in org.dellroad.stuff.spring"><code>ThreadTransactional</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== ANNOTATION TYPE OPTIONAL MEMBER SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation_type_optional_element_summary">
<!--   -->
</a>
<h3>Optional Element Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Optional Element Summary table, listing optional elements, and an explanation">
<caption><span>Optional Elements</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Optional Element and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/annotation/Autowire.html?is-external=true" title="class or interface in org.springframework.beans.factory.annotation">Autowire</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/spring/ThreadConfigurable.html#autowire()">autowire</a></strong></code>
<div class="block">Whether and how to automatically autowire dependencies.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/spring/ThreadConfigurable.html#dependencyCheck()">dependencyCheck</a></strong></code>
<div class="block">Whether to enable dependency checking.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/spring/ThreadConfigurable.html#preConstruction()">preConstruction</a></strong></code>
<div class="block">Whether to inject dependencies prior to constructor execution.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/spring/ThreadConfigurable.html#value()">value</a></strong></code>
<div class="block">Configuration bean definition template name, if any.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation_type_element_detail">
<!--   -->
</a>
<h3>Element Detail</h3>
<a name="value()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>value</h4>
<pre>public abstract&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../src-html/org/dellroad/stuff/spring/ThreadConfigurable.html#line.102">value</a></pre>
<div class="block">Configuration bean definition template name, if any.</div>
<dl>
<dt>Default:</dt>
<dd>""</dd>
</dl>
</li>
</ul>
<a name="autowire()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>autowire</h4>
<pre>public abstract&nbsp;<a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/annotation/Autowire.html?is-external=true" title="class or interface in org.springframework.beans.factory.annotation">Autowire</a>&nbsp;<a href="../../../../src-html/org/dellroad/stuff/spring/ThreadConfigurable.html#line.107">autowire</a></pre>
<div class="block">Whether and how to automatically autowire dependencies.</div>
<dl>
<dt>Default:</dt>
<dd>org.springframework.beans.factory.annotation.Autowire.NO</dd>
</dl>
</li>
</ul>
<a name="dependencyCheck()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dependencyCheck</h4>
<pre>public abstract&nbsp;boolean&nbsp;<a href="../../../../src-html/org/dellroad/stuff/spring/ThreadConfigurable.html#line.112">dependencyCheck</a></pre>
<div class="block">Whether to enable dependency checking.</div>
<dl>
<dt>Default:</dt>
<dd>false</dd>
</dl>
</li>
</ul>
<a name="preConstruction()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>preConstruction</h4>
<pre>public abstract&nbsp;boolean&nbsp;<a href="../../../../src-html/org/dellroad/stuff/spring/ThreadConfigurable.html#line.117">preConstruction</a></pre>
<div class="block">Whether to inject dependencies prior to constructor execution.</div>
<dl>
<dt>Default:</dt>
<dd>false</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ThreadConfigurable.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/dellroad/stuff/spring/RetryTransactionProvider.html" title="interface in org.dellroad.stuff.spring"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/dellroad/stuff/spring/ThreadConfigurableObject.html" title="interface in org.dellroad.stuff.spring"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/dellroad/stuff/spring/ThreadConfigurable.html" target="_top">Frames</a></li>
<li><a href="ThreadConfigurable.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation_type_optional_element_summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#annotation_type_element_detail">Element</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
