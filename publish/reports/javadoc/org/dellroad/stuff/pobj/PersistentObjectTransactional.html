<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Tue May 06 21:40:28 CDT 2014 -->
<title>PersistentObjectTransactional (Java Class Library API)</title>
<meta name="date" content="2014-05-06">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="PersistentObjectTransactional (Java Class Library API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PersistentObjectTransactional.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/dellroad/stuff/pobj/PersistentObjectTransactional.html" target="_top">Frames</a></li>
<li><a href="PersistentObjectTransactional.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation_type_optional_element_summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#annotation_type_element_detail">Element</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.dellroad.stuff.pobj</div>
<h2 title="Annotation Type PersistentObjectTransactional" class="title">Annotation Type PersistentObjectTransactional</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/Documented.html?is-external=true" title="class or interface in java.lang.annotation">@Documented</a>
<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/Inherited.html?is-external=true" title="class or interface in java.lang.annotation">@Inherited</a>
<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/Retention.html?is-external=true" title="class or interface in java.lang.annotation">@Retention</a>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/Retention.html?is-external=true#value()" title="class or interface in java.lang.annotation">value</a>=<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/RetentionPolicy.html?is-external=true#RUNTIME" title="class or interface in java.lang.annotation">RUNTIME</a>)
<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/Target.html?is-external=true" title="class or interface in java.lang.annotation">@Target</a>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/Target.html?is-external=true#value()" title="class or interface in java.lang.annotation">value</a>=<a href="http://download.oracle.com/javase/6/docs/api/java/lang/annotation/ElementType.html?is-external=true#METHOD" title="class or interface in java.lang.annotation">METHOD</a>)
public @interface <a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactional.html#line.76">PersistentObjectTransactional</a></pre>
<div class="block">Declares that annotated methods should execute within <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a> transactions.
 During the execution, the method has private, atomic access to the associated database.

 <p>
 When the associated AOP aspect is applied, annotated methods are executed within a <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a>
 transaction. In normal mode, the transaction simply executes in the current thread. In "Disruptor" mode, the
 annotated method executes on the dedicated transaction thread, and the thread that invoked the method will block
 until the transaction completes (unless specified as <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html#async()"><code>async()</code></a>); return values and thrown exceptions are
 delivered back to the calling thread as they normally would be.
 </p>

 <p>
 The associated AOP aspect must be configured with the <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a>(s) to be
 used for these transactional methods. The easiest way to do this is by declaring the aspect in your Spring
 bean factory, for example:
 <pre>
  &lt;bean class="org.dellroad.stuff.pobj.PersistentObjectTransactionalAspect" factory-method="aspectOf"
      p:persistentObjectTransactionManager-ref="myManagerBean"/&gt;
 </pre>
 </p>

 <p>
 More than one <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a>s may be configured. For example:
 <pre>
  &lt;bean class="org.dellroad.stuff.pobj.PersistentObjectTransactionalAspect" factory-method="aspectOf"&gt;
      &lt;property name="persistentObjectTransactionManagers"&gt;
          &lt;util:list&gt;
              &lt;bean ref="fooManager"/&gt;
              &lt;bean ref="barManager"/&gt;
          &lt;/util:list&gt;
      &lt;/property&gt;
  &lt;/bean&gt;
 </pre>
 In the case of multiple <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a>s, which <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a>
 the aspect uses is determined by the <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html#managerName()"><code>managerName()</code></a> annotation property, which must equal the
 <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getName()">name</a> of the desired <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a>, e.g.:
 <pre>

  &#64;PersistentObjectTransactional(managerName = "fooManager")
  public void doSomething() {
      final Foo database = PersistentObjectTransactionManager.&lt;Foo&gt;getCurrent().getRoot();
      ...
  }
 </pre>
 </p>

 <p>
 To apply the AOP aspect associated with this annotation, the annoated method's class must be woven (either at build
 time or runtime) using the <a href="http://www.eclipse.org/aspectj/doc/released/faq.php#compiler">AspectJ compiler</a>
 with the <code>PersistentObjectTransactionalAspect</code> aspect (included in the <code>dellroad-stuff</code> JAR file).
 <p></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== ANNOTATION TYPE OPTIONAL MEMBER SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation_type_optional_element_summary">
<!--   -->
</a>
<h3>Optional Element Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Optional Element Summary table, listing optional elements, and an explanation">
<caption><span>Optional Elements</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Optional Element and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html#async()">async</a></strong></code>
<div class="block">Whether the transaction should execute asynchronously when in "Disruptor" mode.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html#managerName()">managerName</a></strong></code>
<div class="block">The <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getName()">name</a> of the desired
 <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html#readOnly()">readOnly</a></strong></code>
<div class="block">Whether a read-only transaction should be performed; otherwise, the transaction is read-write.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html#shared()">shared</a></strong></code>
<div class="block">Whether a read-only transaction should access the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html#getSharedRoot()">shared root</a>.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation_type_element_detail">
<!--   -->
</a>
<h3>Element Detail</h3>
<a name="managerName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>managerName</h4>
<pre>public abstract&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactional.html#line.83">managerName</a></pre>
<div class="block">The <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getName()">name</a> of the desired
 <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a>. This property only need be set when more than one
 <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a> is configured with the aspect.</div>
<dl>
<dt>Default:</dt>
<dd>""</dd>
</dl>
</li>
</ul>
<a name="readOnly()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readOnly</h4>
<pre>public abstract&nbsp;boolean&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactional.html#line.88">readOnly</a></pre>
<div class="block">Whether a read-only transaction should be performed; otherwise, the transaction is read-write.</div>
<dl>
<dt>Default:</dt>
<dd>false</dd>
</dl>
</li>
</ul>
<a name="shared()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shared</h4>
<pre>public abstract&nbsp;boolean&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactional.html#line.100">shared</a></pre>
<div class="block">Whether a read-only transaction should access the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html#getSharedRoot()">shared root</a>.
 In shared mode, copies are avoided entirely but the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> root object graph must not be
 modified, either by the annotated method, or by any caller to whom access is granted after the transaction
 ends by virtue of a returned reference.

 <p>
 If <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html#readOnly()"><code>readOnly()</code></a> is false, this property is ignored.
 </p></div>
<dl>
<dt>Default:</dt>
<dd>false</dd>
</dl>
</li>
</ul>
<a name="async()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>async</h4>
<pre>public abstract&nbsp;boolean&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactional.html#line.122">async</a></pre>
<div class="block">Whether the transaction should execute asynchronously when in "Disruptor" mode.

 <p>
 Although all transactions are executed by the dedicated <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a> transaction thread,
 by default <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html" title="annotation in org.dellroad.stuff.pobj"><code>@PersistentObjectTransactional</code></a>-annotated methods will block until the
 transaction completes, allowing the return value from the transaction to be passed back to the caller.
 </p>

 <p>
 Setting <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html#async()"><code>async()</code></a> to true forces the method to return immediately, so that the transaction runs asynchronously.
 Such methods must return <code>void</code>. If an exception is thrown by an asynchronous transaction, it will be logged
 as an error and then discarded.
 </p>

 <p>
 Setting this property to true is only valid when the associated <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a>
 is operating in "Disruptor" mode. Otherwise, an <a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a> is thrown by the annotated method.
 </p></div>
<dl>
<dt>Default:</dt>
<dd>false</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PersistentObjectTransactional.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/dellroad/stuff/pobj/PersistentObjectTransactional.html" target="_top">Frames</a></li>
<li><a href="PersistentObjectTransactional.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation_type_optional_element_summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#annotation_type_element_detail">Element</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
