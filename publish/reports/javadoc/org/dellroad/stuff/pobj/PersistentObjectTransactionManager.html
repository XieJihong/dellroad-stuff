<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Fri Nov 08 11:51:27 CST 2013 -->
<title>PersistentObjectTransactionManager (Java Class Library API)</title>
<meta name="date" content="2013-11-08">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="PersistentObjectTransactionManager (Java Class Library API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PersistentObjectTransactionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html" title="annotation in org.dellroad.stuff.pobj"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectValidationException.html" title="class in org.dellroad.stuff.pobj"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" target="_top">Frames</a></li>
<li><a href="PersistentObjectTransactionManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.dellroad.stuff.pobj</div>
<h2 title="Class PersistentObjectTransactionManager" class="title">Class PersistentObjectTransactionManager&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/dellroad/stuff/spring/AbstractBean.html" title="class in org.dellroad.stuff.spring">org.dellroad.stuff.spring.AbstractBean</a></li>
<li>
<ul class="inheritance">
<li>org.dellroad.stuff.pobj.PersistentObjectTransactionManager&lt;T&gt;</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl><dt><span class="strong">Type Parameters:</span></dt><dd><code>T</code> - root object type</dd></dl>
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/Aware.html?is-external=true" title="class or interface in org.springframework.beans.factory">Aware</a>, <a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/BeanNameAware.html?is-external=true" title="class or interface in org.springframework.beans.factory">BeanNameAware</a>, <a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/DisposableBean.html?is-external=true" title="class or interface in org.springframework.beans.factory">DisposableBean</a>, <a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/InitializingBean.html?is-external=true" title="class or interface in org.springframework.beans.factory">InitializingBean</a></dd>
</dl>
<hr>
<br>
<pre>public class <a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.137">PersistentObjectTransactionManager</a>&lt;T&gt;
extends <a href="../../../../org/dellroad/stuff/spring/AbstractBean.html" title="class in org.dellroad.stuff.spring">AbstractBean</a>
implements <a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/BeanNameAware.html?is-external=true" title="class or interface in org.springframework.beans.factory">BeanNameAware</a></pre>
<div class="block">"Disruptor" style transaction manager for <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> databases.

 <h3>Overview</h3>

 <p>
 Instances of this class manage transactions on a <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> database and support the
 <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html" title="annotation in org.dellroad.stuff.pobj"><code>&#64;PersistentObjectTransactional</code></a> annotation and related AOP aspect.
 All transactions are serialized, atomic, and isolated. Because they are serialized, failures due to
 optimistic locking are not possible. Instances operate in one of two modes: in normal mode, transactions
 are executed on the current thread; in "Disruptor" mode, transactions are executed on a dedicated transaction thread.
 In either case, <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#performTransaction(java.util.concurrent.Callable, boolean, boolean)"><code>performTransaction()</code></a> performs a synchronous transaction. In Disruptor mode
 <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#scheduleTransaction(java.util.concurrent.Callable, boolean, boolean)"><code>scheduleTransaction()</code></a> can be also used, to schedule an asynchronous transaction.
 </p>

 <p>
 In Disruptor mode, by performing all transactions on the same thread, all writes to the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> root
 object stay in the cache of a single CPU core, improving performance.  The capacity of the queue that holds upcoming
 transactions can be configured via <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#setQueueCapacity(int)"><code>setQueueCapacity()</code></a> (default <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true#MAX_VALUE" title="class or interface in java.lang"><code>Integer.MAX_VALUE</code></a>).
 When the queue is full, scheduling a new transaction blocks until space is available.
 </p>

 <p>
 Within a transaction, <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getRoot()"><code>getRoot()</code></a> is used to access that transaction's <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> root object.
 The returned object graph is private to that thread's transaction (except in read-only shared mode; see below).
 </p>

 <h3>Transaction Types</h3>

 <p>
 Transactions may be read-only or read-write. Read-only transactions may optionally be configured to access a
 <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html#getSharedRoot()">shared root</a>, in which case all read-only transactions share the same
 object graph (so no per-transation copies are required), but these transactions must also be careful not to modify
 the object graph returned by <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getRoot()"><code>getRoot()</code></a>. In non-shared read-only transactions, changes are permitted but
 discarded at the end of the transaction. For read-write transactions, any modifications to the
 object graph returned by <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getRoot()"><code>getRoot()</code></a> will be persisted when the transaction completes (assuming it validates).
 In either case, references to the object graph returned by <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getRoot()"><code>getRoot()</code></a> may be returned to callers outside of the
 transaction, who may then safely access them with the assurance that they won't be modified by another thread (although in the
 <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html#getSharedRoot()">shared root</a> case, modifications must still be avoided). Of course, once
 the transaction ends, the transaction's object graph is also no longer guaranteed to be up-to-date.
 </p>

 <p>
 Normally all changes to the associated <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> database are being handled via this class: if not,
 and another thread updates the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> while a transaction is being handled,
 a <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectVersionException.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectVersionException</code></a> can result (the transaction may then be retried if desired).
 </p>

 <h3>Transaction Reentrancy</h3>

 <p>
 Transactions are reentrant, so that if <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#performTransaction(java.util.concurrent.Callable, boolean, boolean)"><code>performTransaction()</code></a> is invoked by a thread while
 executing within an existing transaction, no new transaction is created; instead, execution proceeds in the context of
 the existing transaction. However, if the second transaction is not compatible with the first (e.g., a read-write
 transaction inside a read-only one), an exception is thrown.
 </p>

 <h3>Multiple Transactions</h3>

 <p>
 A thread executing within one <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a>'s transaction may safely invoke
 <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#performTransaction(java.util.concurrent.Callable, boolean, boolean)"><code>performTransaction()</code></a> on another <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a>; however,
 the first transaction will block while the second executes, and therefore callers must be careful to always nest
 these transactions in a consistent ordering to avoid possible deadlock.
 </p>

 <p>
 To allow distingushing among multiple <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a> instances that may have open transactions
 at the same time, instances may be given unique <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getName()">names</a> (names are automatically inherited from the
 <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#setBeanName(java.lang.String)">bean name</a> when instances are declared in a Spring bean factory). Within an open transaction,
 the associated <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a> can be accessed by name via <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getCurrent(java.lang.String)"><code>getCurrent(String)</code></a>.
 As a convenience, in the common case of there only being one open transaction in the current thread, the
 <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getCurrent()"><code>getCurrent()</code></a> variant works; dealing with names is not necessary when there is only one instance.
 </p>

 <h3>Annotation Usage</h3>

 <p>
 The easiest way to use this class is to annotate transactional methods with the
 <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html" title="annotation in org.dellroad.stuff.pobj"><code>&#64;PersistentObjectTransactional</code></a> annotation and apply the associated AOP aspect,
 and then use <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getCurrent()"><code>getCurrent()</code></a> within the transaction to access the <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a> and
 the associated transaction root object. For example:
 <pre>
  // Login a user. This method operates on the database atomically.
  <b>&#64;PersistentObjectTransactional</b>
  public User loginUser(String username) throws LoginException {
      final MyDatabase database = <b>PersistentObjectTransactionManager.&lt;MyDatabase&gt;getCurrent().getRoot()</b>;
      for (User user : database.getUsers()) {
          if (user.getUsername().equals(username)) {
              if (user.getLoginCount() &gt;= MAX_CONCURRENT_LOGINS)
                  throw new LoginException("too many logins");
              user.setLoginCount(user.getLoginCount() + 1);
              return user;
          }
      }
      throw new LoginException("user not found");
  }

  // Grab a read-only database snapshot.
  <b>&#64;PersistentObjectTransactional(readOnly = true, shared = true)</b>
  public MyDatabase getMyDatabase() {
      return <b>PersistentObjectTransactionManager.&lt;MyDatabase&gt;getCurrent().getRoot()</b>;
  }
 </pre>
 Don't forget to configure the <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html" title="annotation in org.dellroad.stuff.pobj"><code>&#64;PersistentObjectTransactional</code></a> AOP aspect
 via Spring as described in <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html" title="annotation in org.dellroad.stuff.pobj"><code>&#64;PersistentObjectTransactional</code></a>.
 </p></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html" title="annotation in org.dellroad.stuff.pobj"><code>&#64;PersistentObjectTransactional</code></a>, 
<a href="http://lmax-exchange.github.io/disruptor/">LMAX Disruptor: High Performance Inter-Thread Messaging Library</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#DEFAULT_QUEUE_CAPACITY">DEFAULT_QUEUE_CAPACITY</a></strong></code>
<div class="block">Default transaction queue capacity (<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true#MAX_VALUE" title="class or interface in java.lang"><code>Integer.MAX_VALUE</code></a>) when in Disruptor mode.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.dellroad.stuff.spring.AbstractBean">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.dellroad.stuff.spring.<a href="../../../../org/dellroad/stuff/spring/AbstractBean.html" title="class in org.dellroad.stuff.spring">AbstractBean</a></h3>
<code><a href="../../../../org/dellroad/stuff/spring/AbstractBean.html#log">log</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#PersistentObjectTransactionManager()">PersistentObjectTransactionManager</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#afterPropertiesSet()">afterPropertiesSet</a></strong>()</code>
<div class="block">Start this instance.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#destroy()">destroy</a></strong>()</code>
<div class="block">Stop this instance.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj">PersistentObjectTransactionManager</a>&lt;T&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getCurrent()">getCurrent</a></strong>()</code>
<div class="block">Get the (unique) instance associated with an open transaction in the current thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj">PersistentObjectTransactionManager</a>&lt;T&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getCurrent(java.lang.String)">getCurrent</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</code>
<div class="block">Get the instance associated with an open transaction in the current thread and having the given manager name.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getName()">getName</a></strong>()</code>
<div class="block">Get the configured name of this instance.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getQueueCapacity()">getQueueCapacity</a></strong>()</code>
<div class="block">Get the configured capacity of the transaction queue for Disruptor mode.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="type parameter in PersistentObjectTransactionManager">T</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getRoot()">getRoot</a></strong>()</code>
<div class="block">Get the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> root object in the transaction associated with the current thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#getVersion()">getVersion</a></strong>()</code>
<div class="block">Get the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html#getVersion()">version</a> of the root object in the transaction
 associated with the current thread.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#isReadOnlySharedRootTransaction()">isReadOnlySharedRootTransaction</a></strong>()</code>
<div class="block">Determine if the current thread is running within a transaction and that transaction is a read-only shared root transaction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#isReadOnlyTransaction()">isReadOnlyTransaction</a></strong>()</code>
<div class="block">Determine if the current thread is running within a transaction and that transaction is read-only.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#isTransaction()">isTransaction</a></strong>()</code>
<div class="block">Determine if the current thread is running within a transaction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&lt;V&gt;&nbsp;V</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#performTransaction(java.util.concurrent.Callable, boolean, boolean)">performTransaction</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;V&gt;&nbsp;action,
                                    boolean&nbsp;readOnly,
                                    boolean&nbsp;shared)</code>
<div class="block">Perform a transaction synchronously.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#performTransaction(java.lang.Runnable, boolean, boolean)">performTransaction</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;action,
                                    boolean&nbsp;readOnly,
                                    boolean&nbsp;shared)</code>
<div class="block">Perform a transaction synchronously.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&lt;V&gt;&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;V&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#scheduleTransaction(java.util.concurrent.Callable, boolean, boolean)">scheduleTransaction</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;V&gt;&nbsp;action,
                                      boolean&nbsp;readOnly,
                                      boolean&nbsp;shared)</code>
<div class="block">Schedule a transaction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#scheduleTransaction(java.lang.Runnable, boolean, boolean)">scheduleTransaction</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;action,
                                      boolean&nbsp;readOnly,
                                      boolean&nbsp;shared)</code>
<div class="block">Schedule a transaction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#setBeanName(java.lang.String)">setBeanName</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;beanName)</code>
<div class="block">Set the name of this instance.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#setDisruptorMode(boolean)">setDisruptorMode</a></strong>(boolean&nbsp;disruptorMode)</code>
<div class="block">Configure whether to enabled "Disruptor" mode where transactions are all executed on a single, dedicated thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#setName(java.lang.String)">setName</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</code>
<div class="block">Set the configured name of this instance.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#setPersistentObject(org.dellroad.stuff.pobj.PersistentObject)">setPersistentObject</a></strong>(<a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html" title="class in org.dellroad.stuff.pobj">PersistentObject</a>&lt;<a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="type parameter in PersistentObjectTransactionManager">T</a>&gt;&nbsp;persistentObject)</code>
<div class="block">Configure the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> database that this instance manages transactions for.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#setQueueCapacity(int)">setQueueCapacity</a></strong>(int&nbsp;queueCapacity)</code>
<div class="block">Set the capacity of the transaction queue.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEFAULT_QUEUE_CAPACITY">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DEFAULT_QUEUE_CAPACITY</h4>
<pre>public static final&nbsp;int <a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.142">DEFAULT_QUEUE_CAPACITY</a></pre>
<div class="block">Default transaction queue capacity (<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true#MAX_VALUE" title="class or interface in java.lang"><code>Integer.MAX_VALUE</code></a>) when in Disruptor mode.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.dellroad.stuff.pobj.PersistentObjectTransactionManager.DEFAULT_QUEUE_CAPACITY">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PersistentObjectTransactionManager()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PersistentObjectTransactionManager</h4>
<pre>public&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.137">PersistentObjectTransactionManager</a>()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setBeanName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBeanName</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.175">setBeanName</a>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;beanName)</pre>
<div class="block">Set the name of this instance.

 <p>
 The implementation in <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a> invokes <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#setName(java.lang.String)"><code>setName(java.lang.String)</code></a>, so that instances'
 names are automatically inherited from their Spring bean names, unless the name is already set to something else.
 </p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/BeanNameAware.html?is-external=true#setBeanName(java.lang.String)" title="class or interface in org.springframework.beans.factory">setBeanName</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/BeanNameAware.html?is-external=true" title="class or interface in org.springframework.beans.factory">BeanNameAware</a></code></dd>
</dl>
</li>
</ul>
<a name="afterPropertiesSet()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>afterPropertiesSet</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.186">afterPropertiesSet</a>()
                        throws <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Start this instance.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/InitializingBean.html?is-external=true#afterPropertiesSet()" title="class or interface in org.springframework.beans.factory">afterPropertiesSet</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/InitializingBean.html?is-external=true" title="class or interface in org.springframework.beans.factory">InitializingBean</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../org/dellroad/stuff/spring/AbstractBean.html#afterPropertiesSet()">afterPropertiesSet</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/dellroad/stuff/spring/AbstractBean.html" title="class in org.dellroad.stuff.spring">AbstractBean</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if instance has already been started.</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd></dl>
</li>
</ul>
<a name="destroy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destroy</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.222">destroy</a>()
             throws <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Stop this instance.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/DisposableBean.html?is-external=true#destroy()" title="class or interface in org.springframework.beans.factory">destroy</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/DisposableBean.html?is-external=true" title="class or interface in org.springframework.beans.factory">DisposableBean</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../org/dellroad/stuff/spring/AbstractBean.html#destroy()">destroy</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/dellroad/stuff/spring/AbstractBean.html" title="class in org.dellroad.stuff.spring">AbstractBean</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if instance has not yet been <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#afterPropertiesSet()">started</a>.</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd></dl>
</li>
</ul>
<a name="setPersistentObject(org.dellroad.stuff.pobj.PersistentObject)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPersistentObject</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.257">setPersistentObject</a>(<a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html" title="class in org.dellroad.stuff.pobj">PersistentObject</a>&lt;<a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="type parameter in PersistentObjectTransactionManager">T</a>&gt;&nbsp;persistentObject)</pre>
<div class="block">Configure the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> database that this instance manages transactions for.

 <p>
 Required property.
 </p></div>
</li>
</ul>
<a name="setDisruptorMode(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDisruptorMode</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.270">setDisruptorMode</a>(boolean&nbsp;disruptorMode)</pre>
<div class="block">Configure whether to enabled "Disruptor" mode where transactions are all executed on a single, dedicated thread.

 <p>
 Default false.
 </p></div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if instance has already been <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#afterPropertiesSet()">started</a>.</dd></dl>
</li>
</ul>
<a name="getName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.279">getName</a>()</pre>
<div class="block">Get the configured name of this instance. Default is <code>"default"</code>.</div>
</li>
</ul>
<a name="setName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setName</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.286">setName</a>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</pre>
<div class="block">Set the configured name of this instance.</div>
</li>
</ul>
<a name="getQueueCapacity()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getQueueCapacity</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.293">getQueueCapacity</a>()</pre>
<div class="block">Get the configured capacity of the transaction queue for Disruptor mode. Default is <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true#MAX_VALUE" title="class or interface in java.lang"><code>Integer.MAX_VALUE</code></a>.</div>
</li>
</ul>
<a name="setQueueCapacity(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setQueueCapacity</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.302">setQueueCapacity</a>(int&nbsp;queueCapacity)</pre>
<div class="block">Set the capacity of the transaction queue. Only relevant for Disruptor mode.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>queueCapacity</code> is zero or less</dd></dl>
</li>
</ul>
<a name="scheduleTransaction(java.util.concurrent.Callable, boolean, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduleTransaction</h4>
<pre>public&nbsp;&lt;V&gt;&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;V&gt;&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.322">scheduleTransaction</a>(<a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;V&gt;&nbsp;action,
                                boolean&nbsp;readOnly,
                                boolean&nbsp;shared)</pre>
<div class="block">Schedule a transaction. The transaction will execute asynchronously.
 This method is only valid in Disruptor mode.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>action</code> - action to perform within the transaction</dd><dd><code>readOnly</code> - true for a read-only transaction</dd><dd><code>shared</code> - if <code>readOnly</code> is true, access the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html#getSharedRoot()">shared root</a>
  to avoid a copy operation; in this case, <code>action</code> must not make any modifications</dd>
<dt><span class="strong">Returns:</span></dt><dd>a <a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> representing the completion of the transaction</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>action</code> is null</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is not yet <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#afterPropertiesSet()">started</a>
  or has been <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#destroy()">destroy()</a> shut down</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is not in Disruptor mode</dd></dl>
</li>
</ul>
<a name="scheduleTransaction(java.lang.Runnable, boolean, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduleTransaction</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.340">scheduleTransaction</a>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;action,
                               boolean&nbsp;readOnly,
                               boolean&nbsp;shared)</pre>
<div class="block">Schedule a transaction. The transaction will execute asynchronously.
 This method is only valid in Disruptor mode.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>action</code> - action to perform within the transaction</dd><dd><code>readOnly</code> - true for a read-only transaction</dd><dd><code>shared</code> - if <code>readOnly</code> is true, access the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html#getSharedRoot()">shared root</a>
  to avoid a copy operation; in this case, <code>action</code> must not make any modifications</dd>
<dt><span class="strong">Returns:</span></dt><dd>a <a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> representing the completion of the transaction</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>action</code> is null</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is not yet <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#afterPropertiesSet()">started</a>
  or has been <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#destroy()">destroy()</a> shut down</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is not in Disruptor mode</dd></dl>
</li>
</ul>
<a name="performTransaction(java.util.concurrent.Callable, boolean, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>performTransaction</h4>
<pre>public&nbsp;&lt;V&gt;&nbsp;V&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.375">performTransaction</a>(<a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;V&gt;&nbsp;action,
                       boolean&nbsp;readOnly,
                       boolean&nbsp;shared)
                     throws <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Perform a transaction synchronously.

 <p>
 In normal mode, the transaction executes in the current thread.
 In Disruptor mode, schedule a transaction, wait for it to complete, and return the result.
 <p>

 <p>
 If the current thread is already executing within a transaction associated with this instance, then
 no new transaction is created; instead, the <code>action</code> executes in the context of the existing
 transaction.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>action</code> - action to perform within the transaction</dd><dd><code>readOnly</code> - true for a read-only transaction</dd><dd><code>shared</code> - if <code>readOnly</code> is true, access the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html#getSharedRoot()">shared root</a>
  to avoid a copy operation; in this case, <code>action</code> must not make any modifications</dd>
<dt><span class="strong">Returns:</span></dt><dd>result of executing the <code>action</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>action</code> is null</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is not yet <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#afterPropertiesSet()">started</a>
  or has been <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#destroy()">destroy()</a> shut down</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance already has a read-only transaction open in the current thread
  and <code>readOnly</code> is false</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance already has a shared mode read-only transaction open in the current thread
  and <code>shared</code> is false</dd>
<dd><code><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectValidationException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectValidationException</a></code> - if <code>readOnly</code> is false and the modified root does not validate</dd>
<dd><code><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectVersionException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectVersionException</a></code> - if <code>readOnly</code> is false and the database was modified by another thread</dd>
<dd><code><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if <code>readOnly</code> is false and some other error occurs</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - if thrown by <code>action</code></dd></dl>
</li>
</ul>
<a name="performTransaction(java.lang.Runnable, boolean, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>performTransaction</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.416">performTransaction</a>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;action,
                      boolean&nbsp;readOnly,
                      boolean&nbsp;shared)</pre>
<div class="block">Perform a transaction synchronously.

 <p>
 In normal mode, the transaction executes in the current thread.
 In Disruptor mode, schedule a transaction, wait for it to complete, and return the result.
 <p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>action</code> - action to perform within the transaction</dd><dd><code>readOnly</code> - true for a read-only transaction</dd><dd><code>shared</code> - if <code>readOnly</code> is true, access the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html#getSharedRoot()">shared root</a>
  to avoid a copy operation; in this case, <code>action</code> must not make any modifications</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>action</code> is null</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is not yet <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#afterPropertiesSet()">started</a>
  or has been <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#destroy()">destroy()</a> shut down</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance already has a read-only transaction open in the current thread
  and <code>readOnly</code> is false</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance already has a shared mode read-only transaction open in the current thread
  and <code>shared</code> is false</dd>
<dd><code><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectValidationException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectValidationException</a></code> - if <code>readOnly</code> is false and the modified root does not validate</dd>
<dd><code><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectVersionException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectVersionException</a></code> - if <code>readOnly</code> is false and the database was modified by another thread</dd>
<dd><code><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if <code>readOnly</code> is false and some other error occurs</dd></dl>
</li>
</ul>
<a name="getCurrent(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrent</h4>
<pre>public static&nbsp;&lt;T&gt;&nbsp;<a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj">PersistentObjectTransactionManager</a>&lt;T&gt;&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.453">getCurrent</a>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</pre>
<div class="block">Get the instance associated with an open transaction in the current thread and having the given manager name.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>name</code> - name assigned to the desired instance</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>name</code> is null</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the current thread is not running within a transaction managed by
  a <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a> assigned the given name</dd></dl>
</li>
</ul>
<a name="getCurrent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrent</h4>
<pre>public static&nbsp;&lt;T&gt;&nbsp;<a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj">PersistentObjectTransactionManager</a>&lt;T&gt;&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.478">getCurrent</a>()</pre>
<div class="block">Get the (unique) instance associated with an open transaction in the current thread.

 <p>
 This is a convenience method for the common case where there is only one instance associated with the current thread.
 </p></div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the current thread is not running within a
  <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a> transaction</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - there is more than one <a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a> transaction
  open in the current thread</dd></dl>
</li>
</ul>
<a name="getRoot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRoot</h4>
<pre>public&nbsp;<a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" title="type parameter in PersistentObjectTransactionManager">T</a>&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.496">getRoot</a>()</pre>
<div class="block">Get the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> root object in the transaction associated with the current thread.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the current thread is not running within a transaction</dd></dl>
</li>
</ul>
<a name="getVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersion</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.506">getVersion</a>()</pre>
<div class="block">Get the <a href="../../../../org/dellroad/stuff/pobj/PersistentObject.html#getVersion()">version</a> of the root object in the transaction
 associated with the current thread.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the current thread is not running within a transaction</dd></dl>
</li>
</ul>
<a name="isTransaction()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTransaction</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.513">isTransaction</a>()</pre>
<div class="block">Determine if the current thread is running within a transaction.</div>
</li>
</ul>
<a name="isReadOnlyTransaction()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isReadOnlyTransaction</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.520">isReadOnlyTransaction</a>()</pre>
<div class="block">Determine if the current thread is running within a transaction and that transaction is read-only.</div>
</li>
</ul>
<a name="isReadOnlySharedRootTransaction()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isReadOnlySharedRootTransaction</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../src-html/org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html#line.528">isReadOnlySharedRootTransaction</a>()</pre>
<div class="block">Determine if the current thread is running within a transaction and that transaction is a read-only shared root transaction.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PersistentObjectTransactionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectTransactional.html" title="annotation in org.dellroad.stuff.pobj"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/dellroad/stuff/pobj/PersistentObjectValidationException.html" title="class in org.dellroad.stuff.pobj"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/dellroad/stuff/pobj/PersistentObjectTransactionManager.html" target="_top">Frames</a></li>
<li><a href="PersistentObjectTransactionManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
